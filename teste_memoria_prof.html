<!doctype html>
<html lang="pt-br">
<html>
	<head>
        <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
		<script>
			function montarTabuleiro(){

				//Realizar sorteio das posições para um jogo 2x2
				do{
					//Sorteio um número entre 1 e 2.
					sortI = parseInt(Math.random()*2)+1;
					sortJ = parseInt(Math.random()*2)+1;
					casa1 = sortI+""+sortJ;

					sortI = parseInt(Math.random()*2)+1;
					sortJ = parseInt(Math.random()*2)+1;
					casa2 = sortI+""+sortJ;

					sortI = parseInt(Math.random()*2)+1;
					sortJ = parseInt(Math.random()*2)+1;
					casa3 = sortI+""+sortJ;

					sortI = parseInt(Math.random()*2)+1;
					sortJ = parseInt(Math.random()*2)+1;
					casa4 = sortI+""+sortJ;

					//Fica sorteando equanto houver posições casas iguais.
				} while(
                    casa1==casa2 || casa1==casa3 ||
                    casa1==casa4 || casa2==casa3 ||
                    casa2==casa4 || casa3==casa4
                );


				var htmlSaida = "";
				for(var i=1; i<=2; i++){
					for(var j=1; j<=2; j++){
						var id = i+""+j;
						switch(id){
							//Atenção ao atributo comparar no botão.
							case casa1:
								htmlSaida += "<button class='btn btn-light' onclick='jogada(this)' id='"+id+"' value='5' comparar='5'>?</button>";
							break;
							case casa2:
								htmlSaida += "<button onclick='jogada(this)' id='"+id+"' value='um' comparar='1'>?</button>";
							break;
							case casa3:
								htmlSaida += "<button onclick='jogada(this)' id='"+id+"' value='1' comparar='1'>?</button>";
							break;
							case casa4:
								htmlSaida += "<button onclick='jogada(this)' id='"+id+"' value='cinco' comparar='5'>?</button>";
							break;

						}
					}
					htmlSaida+="<br>";
				}
				document.getElementById("tabuleiro").innerHTML=htmlSaida;

			}

			//Variáveis que armazenam as jogadas. Cada jogada corresponde à um clique em um botão do tabuleiro
			var jogada1=null;
			var jogada2=null;
			function jogada(obj){

				//Revelar o que está escondido na carta
				obj.innerHTML = obj.value;

				//Verificar se está virando a primeira ou a segunda carta para comparação
				if(jogada1==null){

					//Se não tem jogada1 então este clique é da jogada1
					jogada1 = obj;

					//Remover onclick dos botões acertados para que o sistema não interprete como um jogada o clique em um botão que já foi revelado.
					//Teste o bug comentando esta linha. Revele uma carta e depois clique na mesam carta revelada.
					jogada1.setAttribute("onclick", "");

				}else if(jogada2==null){

					//O jogadar clicou na segunda carta para comparar com a primeira.
					jogada2 = obj;

					//Remover onclick dos botões acertados para que o sistema não interprete como um jogada o clique em um botão que já foi revelado.
					//Teste o bug comentando esta linha. Revele uma carta e depois clique na mesam carta revelada.
					jogada2.setAttribute("onclick", "");

					//Resgatar string de comparação com o atributo comparar dos botões clicados (Criado no for()).
					var comparar1 = jogada1.getAttribute("comparar");
					var comparar2 = jogada2.getAttribute("comparar");

					//Comparar as strings e ver se são elementos correspondentes
					if(comparar1 == comparar2){
						//Chamar a função acertou() em 200 milisegundos para dar tempo de aparecer a carta que virou
						setTimeout("acertou()", 200);
					}else{
						//Se não são correspondentes, aguarda 400 milisegundos para executar a função de erro. Para dar tempo de mostrar a carta antes do alert.
						setTimeout("errou()", 400);
					}
				}
			}

			function acertou(){
				//Aqui você pode fazer suas regras de jogo. Contabilizar acertos.
				alert("Acertou!");

				//Limpar as duas ultimas jogadas da memória
				jogada1 = null;
				jogada2 = null;
			}

			function errou(){
				//Aqui você pode fazer suas regras de jogo. Contabilizar erros.
				alert("Errou!");

				//Se o usuário errar. Esconde as cartas novamente
				jogada1.innerHTML = "?";
				jogada2.innerHTML = "?";

				//Se o usuário errar. Devolver o atributo onclick="jogada(this)"
				jogada1.setAttribute("onclick", "jogada(this)");
				jogada2.setAttribute("onclick", "jogada(this)");

				//Limpar as duas ultimas jogadas da memória
				jogada1 = null;
				jogada2 = null;
			}

		</script>
	</head>
	<body onload="montarTabuleiro()">
		<div id="tabuleiro">

		</div>






	</body>
</html>
